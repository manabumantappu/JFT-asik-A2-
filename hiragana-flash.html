<!DOCTYPE html>
<html>
<head>
<title>Hiragana Flashcard</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
.perspective { perspective: 1200px; }

.card-inner {
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
}

.card.flip .card-inner { 
  transform: rotateY(180deg); 
}

.card-face { 
  backface-visibility: hidden; 
}

.card-back { 
  transform: rotateY(180deg); 
}
</style>
</head>

<body class="bg-gradient-to-b from-purple-50 to-gray-100 min-h-screen flex flex-col">

<header class="bg-purple-600 text-white p-6 rounded-b-3xl shadow-lg">
  <h1 class="text-2xl font-bold">Hiragana Flashcard</h1>
</header>

<main class="flex-1 flex flex-col items-center justify-center px-4 py-8 space-y-8">

<div class="perspective w-full flex justify-center">

  <!-- RESPONSIVE CARD -->
  <div id="flashCard"
    class="card w-full max-w-md sm:max-w-lg md:max-w-xl
           aspect-[4/3] sm:aspect-[3/2]
           cursor-pointer">

    <div class="card-inner w-full h-full relative">

      <!-- FRONT -->
      <div class="card-face absolute w-full h-full 
                  bg-white rounded-3xl shadow-2xl 
                  flex items-center justify-center">

        <span id="frontText"
          class="text-7xl sm:text-8xl md:text-9xl font-bold">
        </span>

      </div>

      <!-- BACK -->
      <div class="card-face card-back absolute w-full h-full 
                  bg-gradient-to-br from-purple-600 to-indigo-600 
                  text-white rounded-3xl shadow-2xl 
                  flex items-center justify-center">

        <span id="backText"
          class="text-5xl sm:text-6xl md:text-7xl font-bold">
        </span>

      </div>

    </div>
  </div>
</div>

<!-- BUTTONS -->
<div class="flex flex-wrap justify-center gap-4 w-full max-w-md">

<button onclick="prevKana()"
 class="flex-1 min-w-[100px]
        bg-gray-300 px-6 py-4 rounded-2xl shadow 
        text-lg font-semibold
        active:scale-95 transition">
Prev
</button>

<button id="shuffleBtn"
 onclick="toggleShuffle()"
 class="flex-1 min-w-[120px]
        bg-yellow-500 text-white px-6 py-4 
        rounded-2xl shadow 
        text-lg font-semibold
        active:scale-95 transition">
Shuffle
</button>

<button onclick="nextKana()"
 class="flex-1 min-w-[100px]
        bg-purple-600 text-white px-6 py-4 
        rounded-2xl shadow 
        text-lg font-semibold
        active:scale-95 transition">
Next
</button>

</div>

</main>

<script type="module">
import { hiraganaData } from "./js/data/hiragana.js";

let originalData = [...hiraganaData];
let data = [...hiraganaData];
let index = 0;
let isShuffled = false;

const card = document.getElementById("flashCard");
const frontText = document.getElementById("frontText");
const backText = document.getElementById("backText");
const shuffleBtn = document.getElementById("shuffleBtn");

function render() {
  frontText.innerText = data[index].char;
  backText.innerText = data[index].romaji;
}

card.addEventListener("click", () => {
  card.classList.toggle("flip");
});

window.nextKana = function() {
  card.classList.remove("flip");
  index = (index + 1) % data.length;
  render();
};

window.prevKana = function() {
  card.classList.remove("flip");
  index = (index - 1 + data.length) % data.length;
  render();
};

window.toggleShuffle = function() {

  card.classList.remove("flip");

  if (!isShuffled) {
    data = shuffle([...data]);
    isShuffled = true;
    shuffleBtn.innerText = "Shuffle ON";
    shuffleBtn.classList.replace("bg-yellow-500","bg-green-500");
  } else {
    data = [...originalData];
    isShuffled = false;
    shuffleBtn.innerText = "Shuffle";
    shuffleBtn.classList.replace("bg-green-500","bg-yellow-500");
  }

  index = 0;
  render();
};

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

render();
</script>

</body>
</html>
