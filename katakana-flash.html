<!DOCTYPE html>
<html>
<head>
<title>Katakana Flashcard</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
.perspective {
  perspective: 1200px;
}
.card-inner {
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
}
.card.flip .card-inner {
  transform: rotateY(180deg);
}
.card-face {
  backface-visibility: hidden;
}
.card-back {
  transform: rotateY(180deg);
}
</style>

</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

<header class="bg-indigo-600 text-white p-6 rounded-b-3xl">
<h1 class="text-xl font-bold">Katakana Flashcard</h1>
</header>

<main class="flex-1 flex flex-col items-center justify-center p-6 space-y-8">

<div class="perspective w-full flex justify-center">

  <div id="flashCard"
    class="card w-[90%] sm:w-[70%] md:w-[50%] lg:w-[35%] aspect-[3/2] cursor-pointer">

    <div class="card-inner w-full h-full relative">

      <!-- FRONT -->
      <div class="card-face absolute w-full h-full bg-white rounded-3xl shadow-2xl flex items-center justify-center">
        <span id="frontText"
          class="text-6xl sm:text-7xl md:text-8xl font-bold">
        </span>
      </div>

      <!-- BACK -->
      <div class="card-face card-back absolute w-full h-full bg-gradient-to-br from-indigo-600 to-blue-600 text-white rounded-3xl shadow-2xl flex items-center justify-center">
        <span id="backText"
          class="text-4xl sm:text-5xl md:text-6xl font-bold">
        </span>
      </div>

    </div>

  </div>

</div>

<div class="flex space-x-4">

<button onclick="prevKana()"
 class="bg-gray-300 px-6 py-3 rounded-xl shadow hover:scale-105 transition">
Prev
</button>

<button onclick="toggleShuffle()"
 class="bg-yellow-500 text-white px-6 py-3 rounded-xl shadow hover:scale-105 transition">
Shuffle
</button>

<button onclick="nextKana()"
 class="bg-indigo-600 text-white px-6 py-3 rounded-xl shadow hover:scale-105 transition">
Next
</button>

</div>


</main>

<script type="module">
import { katakanaData } from "./js/data/katakana.js";

let originalData = [...katakanaData];
let data = [...katakanaData];
let index = 0;
let isShuffled = false;

const card = document.getElementById("flashCard");
const frontText = document.getElementById("frontText");
const backText = document.getElementById("backText");

function render() {
  frontText.innerText = data[index].char;
  backText.innerText = data[index].romaji;
}

card.addEventListener("click", () => {
  card.classList.toggle("flip");
});

window.nextKana = function() {
  card.classList.remove("flip");
  index = (index + 1) % data.length;
  render();
};

window.prevKana = function() {
  card.classList.remove("flip");
  index = (index - 1 + data.length) % data.length;
  render();
};

window.toggleShuffle = function() {

  card.classList.remove("flip");

  if (!isShuffled) {
    data = shuffle([...data]);
    isShuffled = true;
  } else {
    data = [...originalData];
    isShuffled = false;
  }

  index = 0;
  render();
};

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

render();

</script>

</body>
</html>
